<ion-app>
  <ion-split-pane contentId="main-content">
    <ion-menu class="print-hide" contentId="main-content" type="overlay">
      <ion-header>
        <ion-toolbar>
          <ion-list lines="none" class="game-list">
            <ion-item class="game">
              <ion-select
                label="Select Product"
                placeholder="Select Product"
                (ionChange)="paramService.changeProduct()"
                [(ngModel)]="paramService.currentProduct"
              >
                @for (game of paramService.allProducts(); track $index) {
                  <ion-select-option [value]="game.code">
                    {{ game.name }}
                  </ion-select-option>
                }
              </ion-select>
            </ion-item>
          </ion-list>
        </ion-toolbar>
      </ion-header>

      <ion-content>
        <ion-list lines="none">
          @for (ruleHead of rulesService.navHeaders(); track $index) {
            <ion-menu-toggle autoHide="false">
              <ion-item
                color="transparent"
                (click)="navigateTo(ruleHead)"
                [style.border-left]="'5px solid ' + ruleHead.color"
                [style.border-bottom]="'1px solid ' + ruleHead.color"
              >
                {{ ruleHead.name }}

                @if (ruleHead.icon; as icon) {
                  <img
                    class="inline-icon ion-margin-start"
                    [src]="'inicon/' + ruleHead.icon + '.png'"
                    alt="{{ ruleHead.icon }}"
                  />
                }
              </ion-item>
            </ion-menu-toggle>
          }

          @let faqCount = rulesService.faq().length;

          @if (faqCount > 0) {
            <ion-item class="toggle">
              <ion-checkbox
                label-placement="start"
                alignment="start"
                [(ngModel)]="paramService.showFAQ"
              >
                Show FAQ ({{ faqCount }})
              </ion-checkbox>
            </ion-item>
          }

          @let errataCount = paramService.currentErrata().length;

          @if (errataCount > 0) {
            <ion-item class="toggle">
              <ion-checkbox
                label-placement="start"
                alignment="start"
                [(ngModel)]="paramService.showErrata"
              >
                Show Errata ({{ errataCount }})
              </ion-checkbox>
            </ion-item>
          }
        </ion-list>
      </ion-content>
    </ion-menu>

    <ion-router-outlet id="main-content"></ion-router-outlet>
  </ion-split-pane>
</ion-app>
